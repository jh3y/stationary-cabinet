*
  box-sizing border-box
  transform-style preserve-3d

body
  display grid
  place-items center
  min-height 100vh
  background hsl(0, 0%, 7%)
  color hsl(0, 0%, 98%)
  font-family sans-serif
  overflow hidden

select
  margin-bottom 2rem

ul
  perspective 800px
  background red

li
  transition opacity 0.2s, transform 0.2s
  transform-origin 50% 25%
  opacity var(--opacity, 0)
  position absolute
  transform translate3d(calc(var(--x, 0) * 1%), 0, calc(var(--z, 0) * 1px))

.selected
  --scale 1
  --opacity 1
  --z 0

.before
.after
  --opacity 0.2
  --z -400

.before
  --x -110

.after
  --x 110